{"version":3,"file":"ChannelList.js","sources":["../../../src/smart-components/ChannelList/dux/actionTypes.js","../../../src/smart-components/ChannelList/dux/initialState.js","../../../src/smart-components/ChannelList/dux/reducers.js","../../../src/ui/ChannelPreview/utils.js","../../../src/ui/ChannelPreview/index.jsx","../../../src/ui/ChannelHeader/index.jsx","../../../src/ui/EditUserProfile/index.tsx","../../../src/smart-components/ChannelList/components/AddChannel.jsx","../../../src/smart-components/ChannelList/components/ChannelPreviewAction.jsx","../../../src/smart-components/ChannelList/components/Placeholder.jsx","../../../src/smart-components/ChannelList/utils.js","../../../src/smart-components/ChannelList/index.jsx"],"sourcesContent":["export const RESET_CHANNEL_LIST = 'RESET_CHANNEL_LIST';\nexport const CREATE_CHANNEL = 'CREATE_CHANNEL';\nexport const UNLOAD_CHANNELS = 'UNLOAD_CHANNELS';\nexport const SET_CHANNEL_LOADING = 'SET_CHANNEL_LOADING';\nexport const LEAVE_CHANNEL_SUCCESS = 'LEAVE_CHANNEL_SUCCESS';\n\nexport const SET_CURRENT_CHANNEL = 'SET_CURRENT_CHANNEL';\n\nexport const SHOW_CHANNEL_SETTINGS = 'SHOW_CHANNEL_SETTINGS';\nexport const HIDE_CHANNEL_SETTINGS = 'HIDE_CHANNEL_SETTINGS';\n\nexport const FETCH_CHANNELS_START = 'FETCH_CHANNELS_START';\nexport const FETCH_CHANNELS_SUCCESS = 'FETCH_CHANNELS_SUCCESS';\nexport const FETCH_CHANNELS_FAILURE = 'FETCH_CHANNELS_FAILURE';\n\nexport const INIT_CHANNELS_START = 'INIT_CHANNELS_START';\nexport const INIT_CHANNELS_SUCCESS = 'INIT_CHANNELS_SUCCESS';\nexport const INIT_CHANNELS_FAILURE = 'INIT_CHANNELS_FAILURE';\n\nexport const INVITE_MEMBERS_SUCESS = 'INVITE_MEMBERS_SUCESS';\n\nexport const ON_USER_JOINED = 'ON_USER_JOINED';\nexport const ON_CHANNEL_DELETED = 'ON_CHANNEL_DELETED';\nexport const ON_LAST_MESSAGE_UPDATED = 'ON_LAST_MESSAGE_UPDATED';\nexport const ON_USER_LEFT = 'ON_USER_LEFT';\nexport const ON_CHANNEL_CHANGED = 'ON_CHANNEL_CHANGED';\nexport const ON_CHANNEL_ARCHIVED = 'ON_CHANNEL_ARCHIVED';\nexport const ON_CHANNEL_FROZEN = 'ON_CHANNEL_FROZEN';\nexport const ON_CHANNEL_UNFROZEN = 'ON_CHANNEL_UNFROZEN';\n\nexport const ON_READ_RECEIPT_UPDATED = 'ON_READ_RECEIPT_UPDATED';\nexport const ON_DELIVERY_RECEIPT_UPDATED = 'ON_DELIVERY_RECEIPT_UPDATED';\n\nexport const CHANNEL_REPLACED_TO_TOP = 'CHANNEL_REPLACED_TO_TOP';\nexport const CHANNEL_LIST_PARAMS_UPDATED = 'CHANNEL_LIST_PARAMS_UPDATED';\n","export default {\n  // we might not need this initialized state -> should remove\n  initialized: false,\n  loading: false,\n  allChannels: [],\n  currentChannel: null,\n  showSettings: false,\n  channelListQuery: null,\n  currentUserId: '',\n};\n","import { filterChannelListParams, getChannelsWithUpsertedChannel } from '../../../utils';\nimport * as actions from './actionTypes';\nimport initialState from './initialState';\n\nexport default function reducer(state, action) {\n  switch (action.type) {\n    case actions.INIT_CHANNELS_START:\n      return {\n        ...state,\n        loading: true,\n      };\n    case actions.RESET_CHANNEL_LIST:\n      return initialState;\n    case actions.INIT_CHANNELS_SUCCESS:\n      return {\n        ...state,\n        initialized: true,\n        loading: false,\n        allChannels: action.payload,\n        currentChannel: (action.payload && action.payload.length && action.payload.length > 0)\n          ? action.payload[0].url\n          : null,\n      };\n    case actions.FETCH_CHANNELS_SUCCESS: {\n      const currentChannels = state.allChannels.map((c) => c.url);\n      const filteredChannels = action.payload.filter(\n        ({ url }) => !(currentChannels.find((c) => c === url)),\n      );\n      return {\n        ...state,\n        allChannels: [\n          ...state.allChannels,\n          ...filteredChannels,\n        ],\n      };\n    }\n    case actions.CREATE_CHANNEL: {\n      const channel = action.payload;\n      if (state.channelListQuery) {\n        if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {\n          return {\n            ...state,\n            allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel),\n          };\n        }\n        return {\n          ...state,\n          currentChannel: channel.url,\n        };\n      }\n      return {\n        ...state,\n        currentChannel: channel.url,\n        allChannels: [channel, ...state.allChannels.filter((ch) => ch.url !== channel.url)],\n      };\n    }\n    case actions.ON_CHANNEL_ARCHIVED: {\n      const channel = action.payload;\n      if (state.channelListQuery) {\n        if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {\n          return {\n            ...state,\n            allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel),\n          };\n        }\n      }\n      return {\n        ...state,\n        currentChannel: (channel.url === state.currentChannel)\n          ? state.allChannels[state.allChannels[0].url === channel.url ? 1 : 0].url\n          : state.currentChannel,\n        allChannels: state.allChannels.filter(({ url }) => url !== channel.url),\n      };\n    }\n    case actions.LEAVE_CHANNEL_SUCCESS:\n    case actions.ON_CHANNEL_DELETED: {\n      const channelUrl = action.payload;\n      return {\n        ...state,\n        currentChannel: (channelUrl === state.currentChannel)\n          ? state.allChannels[0].url\n          : state.currentChannel,\n        allChannels: state.allChannels.filter(({ url }) => url !== channelUrl),\n      };\n    }\n    case actions.ON_USER_LEFT: {\n      const { channel, isMe } = action.payload;\n      if (state.channelListQuery) {\n        if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {\n          const filteredChannels = getChannelsWithUpsertedChannel(state.allChannels, channel);\n          return {\n            ...state,\n            currentChannel: (isMe && (channel.url === state.currentChannel))\n              ? filteredChannels[0].url\n              : state.currentChannel,\n            allChannels: filteredChannels,\n          };\n        }\n        return {\n          ...state,\n          currentChannel: (channel.url === state.currentChannel)\n            ? state.allChannels[0].url\n            : state.currentChannel,\n          allChannels: state.allChannels.filter(({ url }) => url !== channel.url),\n        };\n      }\n      const filteredChannels = state.allChannels.filter((c) => c.url !== channel.url);\n      return {\n        ...state,\n        currentChannel: (isMe && (channel.url === state.currentChannel))\n          ? filteredChannels[0].url\n          : state.currentChannel,\n        allChannels: filteredChannels,\n      };\n    }\n    case actions.ON_USER_JOINED:\n    case actions.ON_CHANNEL_CHANGED:\n    case actions.ON_READ_RECEIPT_UPDATED:\n    case actions.ON_DELIVERY_RECEIPT_UPDATED: {\n      const { allChannels = [] } = state;\n      const channel = action.payload;\n      const { unreadMessageCount } = channel;\n      if (!channel.lastMessage) return state;\n      if (state.channelListQuery) {\n        if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {\n          return {\n            ...state,\n            allChannels: getChannelsWithUpsertedChannel(allChannels, channel),\n          };\n        }\n        return {\n          ...state,\n          currentChannel: (channel.url === state.currentChannel)\n            ? state.allChannels[state.allChannels[0].url === channel.url ? 1 : 0].url\n            // if coming channel is first of channel list, current channel will be the next one\n            : state.currentChannel,\n          allChannels: state.allChannels.filter(({ url }) => url !== channel.url),\n        };\n      }\n      // if its only an unread message count change, dont push to top\n      if (unreadMessageCount === 0) {\n        const currentChannel = allChannels.find(({ url }) => url === channel.url);\n        const currentUnreadCount = currentChannel && currentChannel.unreadMessageCount;\n        if (currentUnreadCount === 0) {\n          return {\n            ...state,\n            allChannels: state.allChannels.map((ch) => (ch.url === channel.url ? channel : ch)),\n          };\n        }\n      }\n      return {\n        ...state,\n        allChannels: [\n          channel,\n          ...state.allChannels.filter(({ url }) => url !== action.payload.url),\n        ],\n      };\n    }\n    case actions.SET_CURRENT_CHANNEL:\n      return {\n        ...state,\n        currentChannel: action.payload,\n      };\n    case actions.SHOW_CHANNEL_SETTINGS:\n      return {\n        ...state,\n        showSettings: true,\n      };\n    case actions.HIDE_CHANNEL_SETTINGS:\n      return {\n        ...state,\n        showSettings: false,\n      };\n    case actions.ON_LAST_MESSAGE_UPDATED:\n      return {\n        ...state,\n        allChannels: state.allChannels.map((channel) => (\n          channel.url === action.payload.url ? action.payload : channel)),\n      };\n    case actions.ON_CHANNEL_FROZEN: {\n      const channel = action.payload;\n      if (state.channelListQuery) {\n        if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {\n          return {\n            ...state,\n            allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel),\n          };\n        }\n        return {\n          ...state,\n          currentChannel: (channel.url === state.currentChannel)\n            ? state.allChannels[state.allChannels[0].url === channel.url ? 1 : 0].url\n            // if coming channel is first of channel list, current channel will be the next one\n            : state.currentChannel,\n          allChannels: state.allChannels.filter(({ url }) => url !== channel.url),\n        };\n      }\n      return {\n        ...state,\n        allChannels: state.allChannels.map((ch) => {\n          if (ch.url === channel.url) {\n            // eslint-disable-next-line no-param-reassign\n            ch.isFrozen = true;\n            return ch;\n          }\n          return ch;\n        }),\n      };\n    }\n    case actions.ON_CHANNEL_UNFROZEN: {\n      const channel = action.payload;\n      if (state.channelListQuery) {\n        if (filterChannelListParams(state.channelListQuery, channel, state.currentUserId)) {\n          return {\n            ...state,\n            allChannels: getChannelsWithUpsertedChannel(state.allChannels, channel),\n          };\n        }\n        return {\n          ...state,\n          currentChannel: (channel.url === state.currentChannel)\n            ? state.allChannels[state.allChannels[0].url === channel.url ? 1 : 0].url\n            // if coming channel is first of channel list, current channel will be the next one\n            : state.currentChannel,\n          allChannels: state.allChannels.filter(({ url }) => url !== channel.url),\n        };\n      }\n      return {\n        ...state,\n        allChannels: state.allChannels.map((ch) => {\n          if (ch.url === channel.url) {\n            // eslint-disable-next-line no-param-reassign\n            ch.isFrozen = false;\n            return ch;\n          }\n          return ch;\n        }),\n      };\n    }\n    case actions.CHANNEL_REPLACED_TO_TOP: {\n      return {\n        ...state,\n        allChannels: [\n          action.payload,\n          ...state.allChannels.filter((channel) => channel.url !== action.payload.url),\n        ],\n      };\n    }\n    case actions.CHANNEL_LIST_PARAMS_UPDATED:\n      return {\n        ...state,\n        currentUserId: action.payload.currentUserId,\n        channelListQuery: action.payload.channelListQuery,\n      };\n    default:\n      return state;\n  }\n}\n","import isToday from 'date-fns/isToday';\nimport format from 'date-fns/format';\nimport isYesterday from 'date-fns/isYesterday';\n\nimport { truncateString } from '../../utils';\nimport { LabelStringSet } from '../Label';\n\nexport const getChannelTitle = (channel = {}, currentUserId, stringSet = LabelStringSet) => {\n  if (!channel || (!channel.name && !channel.members)) {\n    return stringSet.NO_TITLE;\n  }\n  if (channel.name && channel.name !== 'Group Channel') {\n    return channel.name;\n  }\n  if (channel.members.length === 1) {\n    return stringSet.NO_MEMBERS;\n  }\n\n  return channel.members\n    .filter(({ userId }) => userId !== currentUserId)\n    .map(({ nickname }) => (nickname || stringSet.NO_NAME))\n    .join(', ');\n};\n\nexport const getLastMessageCreatedAt = (channel) => {\n  if (!channel || !channel.lastMessage) {\n    return '';\n  }\n  const date = channel.lastMessage.createdAt;\n  if (isToday(date)) {\n    return format(date, 'p');\n  }\n\n  if (isYesterday(date)) {\n    return 'Yesterday';\n  }\n\n  return format(date, 'MMM dd');\n};\n\nexport const getTotalMembers = (channel) => (\n  channel && channel.memberCount\n    ? channel.memberCount\n    : 0\n);\n\nconst getPrettyLastMessage = (message = {}) => {\n  const MAXLEN = 30;\n  const { messageType, name } = message;\n  if (messageType === 'file') {\n    return truncateString(name, MAXLEN);\n  }\n  return message.message;\n};\n\nexport const getLastMessage = (channel) => (\n  channel && channel.lastMessage\n    ? getPrettyLastMessage(channel.lastMessage)\n    : ''\n);\n\nexport const getChannelUnreadMessageCount = (channel) => (\n  (channel && channel.unreadMessageCount)\n    ? channel.unreadMessageCount\n    : 0\n);\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport './index.scss';\n\nimport ChannelAvatar from '../ChannelAvatar/index';\nimport Badge from '../Badge';\nimport Icon, { IconColors, IconTypes } from '../Icon';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\n\nimport * as utils from './utils';\n\nexport default function ChannelPreview({\n  channel,\n  currentUser,\n  isActive,\n  ChannelAction,\n  theme,\n  onClick,\n  tabIndex,\n}) {\n  const {\n    userId,\n  } = currentUser;\n  const { isBroadcast, isFrozen } = channel;\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div\n      className={[\n        'sendbird-channel-preview',\n        isActive ? 'sendbird-channel-preview--active' : '',\n      ].join(' ')}\n      role=\"link\"\n      onClick={onClick}\n      onKeyPress={onClick}\n      tabIndex={tabIndex}\n    >\n      <div\n        className=\"sendbird-channel-preview__avatar\"\n      >\n        <ChannelAvatar\n          channel={channel}\n          userId={userId}\n          theme={theme}\n        />\n      </div>\n      <div className=\"sendbird-channel-preview__content\">\n        <div className=\"sendbird-channel-preview__content__upper\">\n          <div className=\"sendbird-channel-preview__content__upper__header\">\n            {\n              isBroadcast\n              && (\n                <div className=\"sendbird-channel-preview__content__upper__header__broadcast-icon\">\n                  <Icon\n                    type={IconTypes.BROADCAST}\n                    fillColor={IconColors.SECONDARY}\n                    height=\"16px\"\n                    width=\"16px\"\n                  />\n                </div>\n              )\n            }\n            <Label\n              className=\"sendbird-channel-preview__content__upper__header__channel-name\"\n              type={LabelTypography.SUBTITLE_2}\n              color={LabelColors.ONBACKGROUND_1}\n            >\n              {utils.getChannelTitle(channel, userId, stringSet)}\n            </Label>\n            <Label\n              className=\"sendbird-channel-preview__content__upper__header__total-members\"\n              type={LabelTypography.CAPTION_2}\n              color={LabelColors.ONBACKGROUND_2}\n            >\n              {utils.getTotalMembers(channel)}\n            </Label>\n            {\n              isFrozen\n              && (\n                <div title=\"Frozen\" className=\"sendbird-channel-preview__content__upper__header__frozen-icon\">\n                  <Icon\n                    type={IconTypes.FREEZE}\n                    fillColor={IconColors.PRIMARY}\n                    height={12}\n                    width={12}\n                  />\n                </div>\n              )\n            }\n          </div>\n          <Label\n            className=\"sendbird-channel-preview__content__upper__last-message-at\"\n            type={LabelTypography.CAPTION_3}\n            color={LabelColors.ONBACKGROUND_2}\n          >\n            {utils.getLastMessageCreatedAt(channel)}\n          </Label>\n        </div>\n        <div className=\"sendbird-channel-preview__content__lower\">\n          <Label\n            className=\"sendbird-channel-preview__content__lower__last-message\"\n            type={LabelTypography.BODY_2}\n            color={LabelColors.ONBACKGROUND_3}\n          >\n            {utils.getLastMessage(channel)}\n          </Label>\n          <div className=\"sendbird-channel-preview__content__lower__unread-message-count\">\n            {\n              utils.getChannelUnreadMessageCount(channel) // return number\n                ? <Badge count={utils.getChannelUnreadMessageCount(channel)} />\n                : null\n            }\n          </div>\n        </div>\n      </div>\n      <div\n        className=\"sendbird-channel-preview__action\"\n      >\n        {ChannelAction}\n      </div>\n    </div>\n  );\n}\n\nChannelPreview.propTypes = {\n  channel: PropTypes.shape({\n    members: PropTypes.arrayOf(PropTypes.shape({})),\n    coverUrl: PropTypes.string,\n    isBroadcast: PropTypes.bool,\n    isFrozen: PropTypes.bool,\n  }),\n  currentUser: PropTypes.shape({\n    userId: PropTypes.string,\n  }),\n  isActive: PropTypes.bool,\n  ChannelAction: PropTypes.element.isRequired,\n  theme: PropTypes.string,\n  onClick: PropTypes.func,\n  tabIndex: PropTypes.number,\n};\n\nChannelPreview.defaultProps = {\n  channel: {},\n  currentUser: {},\n  isActive: false,\n  theme: 'light',\n  onClick: () => { },\n  tabIndex: 0,\n};\n","import React, { useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LocalizationContext } from '../../lib/LocalizationContext';\nimport Label, { LabelTypography, LabelColors } from '../Label';\nimport IconButton from '../IconButton';\n\nimport './index.scss';\nimport Avatar from '../Avatar/index';\n\nexport default function ChannelHeader({\n  user,\n  renderHeader,\n  iconButton,\n  onEdit,\n  allowProfileEdit,\n}) {\n  const { stringSet } = useContext(LocalizationContext);\n  return (\n    <div\n      className={[\n        'sendbird-channel-header',\n        allowProfileEdit ? 'sendbird-channel-header--allow-edit' : '',\n      ].join(' ')}\n    >\n      {\n        renderHeader\n          ? renderHeader()\n          : (\n            <div\n              className=\"sendbird-channel-header__title\"\n              role=\"button\"\n              onClick={onEdit}\n              onKeyDown={onEdit}\n              tabIndex=\"0\"\n            >\n              <div className=\"sendbird-channel-header__title__left\">\n                <Avatar\n                  width=\"32px\"\n                  height=\"32px\"\n                  src={user.profileUrl}\n                  alt={user.nickname}\n                />\n              </div>\n              <div className=\"sendbird-channel-header__title__right\">\n                <Label\n                  className=\"sendbird-channel-header__title__right__name\"\n                  type={LabelTypography.SUBTITLE_2}\n                  color={LabelColors.ONBACKGROUND_1}\n                >\n                  {user.nickname || stringSet.NO_NAME}\n                </Label>\n                <Label\n                  className=\"sendbird-channel-header__title__right__user-id\"\n                  type={LabelTypography.BODY_2}\n                  color={LabelColors.ONBACKGROUND_2}\n                >\n                  {user.userId}\n                </Label>\n              </div>\n            </div>\n          )\n      }\n      <div className=\"sendbird-channel-header__right-icon\">\n        {iconButton}\n      </div>\n    </div>\n  );\n}\n\nChannelHeader.propTypes = {\n  user: PropTypes.shape({\n    profileUrl: PropTypes.string,\n    nickname: PropTypes.string,\n    userId: PropTypes.string,\n  }),\n  renderHeader: PropTypes.func,\n  iconButton: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.instanceOf(IconButton),\n  ]),\n  onEdit: PropTypes.func.isRequired,\n  allowProfileEdit: PropTypes.bool,\n};\n\nChannelHeader.defaultProps = {\n  user: {},\n  renderHeader: null,\n  iconButton: null,\n  allowProfileEdit: false,\n};\n","import React, {\n  ReactElement,\n  useRef,\n  useState,\n  useContext,\n} from 'react';\nimport './index.scss';\n\nimport Modal from '../Modal';\nimport withSendbirdContext from '../../lib/SendbirdSdkContext';\nimport { LocalizationContext } from '../../lib/LocalizationContext';\n\nimport Input, { InputLabel } from '../Input';\nimport Avatar from '../Avatar';\nimport Icon, { IconTypes } from '../Icon';\nimport { Type as ButtonType } from '../Button/type';\nimport Label, { LabelColors, LabelTypography } from '../Label';\nimport TextButton from '../TextButton';\nimport { SendbirdTypes } from '../../types';\nimport { noop } from '../../utils/utils';\n\ninterface Props {\n  user: SendbirdTypes['User'];\n  theme?: string;\n  onCancel(): void;\n  onSubmit(newFile: File, newNickname: string): void;\n  changeTheme?(theme: string): void;\n  onThemeChange?(theme: string): void;\n}\n\nexport function EditUserProfile({\n  user,\n  theme = 'light',\n  onCancel,\n  onSubmit,\n  changeTheme = noop,\n  onThemeChange = null,\n}: Props): ReactElement {\n  const hiddenInputRef = useRef(null);\n  const inputRef = useRef(null);\n  const formRef = useRef(null);\n  const { stringSet } = useContext(LocalizationContext);\n  const [currentImg, setCurrentImg] = useState(null);\n  const [newFile, setNewFile] = useState(null);\n\n  return (\n    <Modal\n      titleText={stringSet.EDIT_PROFILE__TITLE}\n      submitText={stringSet.BUTTON__SAVE}\n      type={ButtonType.PRIMARY}\n      onCancel={onCancel}\n      onSubmit={() => {\n        if (user.nickname !== '' && !inputRef.current.value) {\n          if (formRef.current.reportValidity) { // might not work in explorer\n            formRef.current.reportValidity();\n          }\n          return;\n        }\n        onSubmit(inputRef.current.value, newFile);\n        onCancel();\n      }}\n    >\n      <form\n        className=\"sendbird-edit-user-profile\"\n        ref={formRef}\n        onSubmit={(e) => { e.preventDefault(); }}\n      >\n        <section className=\"sendbird-edit-user-profile__img\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__IMAGE_LABEL}\n          </InputLabel>\n          <div className=\"sendbird-edit-user-profile__img__avatar\">\n            <Avatar\n              width=\"80px\"\n              height=\"80px\"\n              src={currentImg || user.profileUrl}\n            />\n          </div>\n          <input\n            ref={hiddenInputRef}\n            type=\"file\"\n            accept=\"image/gif, image/jpeg, image/png\"\n            style={{ display: 'none' }}\n            onChange={(e) => {\n              setCurrentImg(URL.createObjectURL(e.target.files[0]));\n              setNewFile(e.target.files[0]);\n              hiddenInputRef.current.value = '';\n            }}\n          />\n          <TextButton\n            className=\"sendbird-edit-user-profile__img__avatar-button\"\n            notUnderline\n            onClick={() => hiddenInputRef.current.click()}\n          >\n            <Label type={LabelTypography.BUTTON_1} color={LabelColors.PRIMARY}>\n              {stringSet.EDIT_PROFILE__IMAGE_UPLOAD}\n            </Label>\n          </TextButton>\n        </section>\n        <section className=\"sendbird-edit-user-profile__name\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__NICKNAME_LABEL}\n          </InputLabel>\n          <Input\n            required={user.nickname !== ''}\n            name=\"sendbird-edit-user-profile__name__input\"\n            ref={inputRef}\n            value={user.nickname}\n            placeHolder={stringSet.EDIT_PROFILE__NICKNAME_PLACEHOLDER}\n          />\n        </section>\n        <section className=\"sendbird-edit-user-profile__userid\">\n          <InputLabel>\n            {/*  userID */}\n            {stringSet.EDIT_PROFILE__USERID_LABEL}\n          </InputLabel>\n          <Input\n            disabled\n            name=\"sendbird-edit-user-profile__userid__input\"\n            value={user.userId}\n          />\n        </section>\n        <section className=\"sendbird-edit-user-profile__theme\">\n          <InputLabel>\n            {stringSet.EDIT_PROFILE__THEME_LABEL}\n          </InputLabel>\n          <div className=\"sendbird-edit-user-profile__theme__theme-icon\">\n            {\n              theme === 'dark'\n                ? (\n                  <Icon\n                    onClick={() => {\n                      changeTheme('light');\n                      if (onThemeChange && typeof onThemeChange === 'function') {\n                        onThemeChange('light');\n                      }\n                    }}\n                    type={IconTypes.TOGGLE_ON}\n                    width={44}\n                    height={24}\n                  />\n                )\n                : (\n                  <Icon\n                    onClick={() => {\n                      changeTheme('dark');\n                      if (onThemeChange && typeof onThemeChange === 'function') {\n                        onThemeChange('dark');\n                      }\n                    }}\n                    type={IconTypes.TOGGLE_OFF}\n                    width={44}\n                    height={24}\n                  />\n                )\n            }\n          </div>\n        </section>\n      </form>\n    </Modal>\n  );\n}\n\nconst mapStoreToProps = (store) => {\n  return {\n    theme: store.config.theme,\n    changeTheme: store.config.setCurrenttheme,\n  };\n};\n\ninterface ConnectedEditUserProfileProps {\n  user: SendbirdTypes['User'];\n  onCancel(): void;\n  onSubmit(newFile: File, newNickname: string): void;\n  onThemeChange?(theme: string): void;\n}\n\nconst ConnectedEditUserProfile: (\n  props: ConnectedEditUserProfileProps\n) => React.Component = withSendbirdContext(EditUserProfile, mapStoreToProps);\n\nexport default ConnectedEditUserProfile;\n","import './add-channel.scss';\n\nimport React, { useState, useContext } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport IconButton from '../../../ui/IconButton';\nimport Label, { LabelColors, LabelTypography } from '../../../ui/Label';\nimport Icon, { IconTypes, IconColors } from '../../../ui/Icon';\nimport InviteMembers from '../../InviteMembers';\n\nimport {\n  createChannel,\n  createDefaultUserListQuery,\n  isBroadcastChannelEnabled,\n  isSuperGroupChannelEnabled,\n} from './utils';\nimport { CREATE_CHANNEL } from '../dux/actionTypes';\nimport Modal from '../../../ui/Modal';\n\nexport default function AddChannel({\n  sdk,\n  disabled,\n  channelListDispatcher,\n  onBeforeCreateChannel,\n  userId,\n  userFilledApplicationUserListQuery,\n  userListQuery,\n}) {\n  const [showModal, setShowModal] = useState(false);\n  const [step, setStep] = useState(0);\n  const [type, setType] = useState('group');\n  const { stringSet } = useContext(LocalizationContext);\n\n  if (!sdk || !sdk.createApplicationUserListQuery) {\n    return null;\n  }\n\n  const isBroadcastAvailable = isBroadcastChannelEnabled(sdk);\n  const isSupergroupAvailable = isSuperGroupChannelEnabled(sdk);\n\n  return (\n    <>\n      <IconButton\n        height=\"32px\"\n        width=\"32px\"\n        onClick={() => {\n          setShowModal(true);\n        }}\n        disabled={disabled}\n      >\n        <Icon\n          type={IconTypes.CREATE}\n          fillColor={IconColors.PRIMARY}\n          width=\"24px\"\n          height=\"24px\"\n        />\n      </IconButton>\n      {\n        showModal && step === 0 && (\n          <Modal\n            titleText=\"New channel\"\n            hideFooter\n            onCancel={() => { setShowModal(false); }}\n            onSubmit={() => {}}\n          >\n            <div className=\"sendbird-add-channel__rectangle-wrap\">\n              <div\n                className=\"sendbird-add-channel__rectangle\"\n                onClick={() => {\n                  setType('group');\n                  setStep(1);\n                }}\n                role=\"button\"\n                tabIndex={0}\n                onKeyDown={() => {\n                  setType('group');\n                  setStep(1);\n                }}\n              >\n                <Icon\n                  className=\"sendbird-add-channel__rectangle__chat-icon\"\n                  type={IconTypes.CHAT}\n                  fillColor={IconColors.PRIMARY}\n                  width=\"28px\"\n                  height=\"28px\"\n                />\n                <Label type={LabelTypography.SUBTITLE_1} color={LabelColors.ONBACKGROUND_1}>\n                  Group\n                </Label>\n              </div>\n              {\n                isSupergroupAvailable && (\n                  <div\n                    className=\"sendbird-add-channel__rectangle\"\n                    onClick={() => {\n                      setType('supergroup');\n                      setStep(1);\n                    }}\n                    role=\"button\"\n                    tabIndex={0}\n                    onKeyDown={() => {\n                      setType('supergroup');\n                      setStep(1);\n                    }}\n                  >\n                    <Icon\n                      className=\"sendbird-add-channel__rectangle__supergroup-icon\"\n                      type={IconTypes.SUPERGROUP}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"28px\"\n                      height=\"28px\"\n                    />\n                    <Label type={LabelTypography.SUBTITLE_1} color={LabelColors.ONBACKGROUND_1}>\n                      Super group\n                    </Label>\n                  </div>\n                )\n              }\n              {\n                isBroadcastAvailable && (\n                  <div\n                    className=\"sendbird-add-channel__rectangle\"\n                    onClick={() => {\n                      setType('broadcast');\n                      setStep(1);\n                    }}\n                    role=\"button\"\n                    tabIndex={0}\n                    onKeyDown={() => {\n                      setType('broadcast');\n                      setStep(1);\n                    }}\n                  >\n                    <Icon\n                      className=\"sendbird-add-channel__rectangle__broadcast-icon\"\n                      type={IconTypes.BROADCAST}\n                      fillColor={IconColors.PRIMARY}\n                      width=\"28px\"\n                      height=\"28px\"\n                    />\n                    <Label type={LabelTypography.SUBTITLE_1} color={LabelColors.ONBACKGROUND_1}>\n                      Broadcast\n                    </Label>\n                  </div>\n                )\n              }\n            </div>\n          </Modal>\n        )\n      }\n      {\n        showModal && step === 1 && (\n          <InviteMembers\n            swapParams={\n              sdk && sdk.getErrorFirstCallback && sdk.getErrorFirstCallback()\n            }\n            titleText={stringSet.MODAL__CREATE_CHANNEL__TITLE}\n            submitText={stringSet.BUTTON__CREATE}\n            closeModal={() => {\n              setStep(0);\n              setShowModal(false);\n            }}\n            idsToFilter={[userId]}\n            userQueryCreator={() => ((userListQuery && typeof userListQuery === 'function')\n              ? userListQuery()\n              : createDefaultUserListQuery({ sdk, userFilledApplicationUserListQuery })\n            )}\n            onSubmit={(selectedUsers) => createChannel(\n              sdk,\n              selectedUsers,\n              onBeforeCreateChannel,\n              userId,\n              type,\n            ).then((channel) => {\n              // maybe - do this in event listener\n              channelListDispatcher({\n                type: CREATE_CHANNEL,\n                payload: channel,\n              });\n            })}\n          />\n        )\n      }\n    </>\n  );\n}\n\nAddChannel.propTypes = {\n  sdk: PropTypes.shape({\n    getErrorFirstCallback: PropTypes.func,\n    createApplicationUserListQuery: PropTypes.func,\n  }).isRequired,\n  disabled: PropTypes.bool,\n  channelListDispatcher: PropTypes.func.isRequired,\n  userFilledApplicationUserListQuery: PropTypes.shape({}),\n  onBeforeCreateChannel: PropTypes.func,\n  userId: PropTypes.string.isRequired,\n  userListQuery: PropTypes.func,\n};\n\nAddChannel.defaultProps = {\n  disabled: false,\n  userFilledApplicationUserListQuery: {},\n  onBeforeCreateChannel: null,\n  userListQuery: null,\n};\n","import React, {\n  useState,\n  useRef,\n  useContext,\n} from 'react';\nimport PropTypes from 'prop-types';\n\nimport { LocalizationContext } from '../../../lib/LocalizationContext';\nimport ContextMenu, { MenuItem, MenuItems } from '../../../ui/ContextMenu';\nimport IconButton from '../../../ui/IconButton';\nimport Icon, { IconTypes, IconColors } from '../../../ui/Icon';\nimport LeaveChannelModal from '../../ChannelSettings/components/LeaveChannel';\n\nexport default function ChannelPreviewAction({ disabled, onLeaveChannel }) {\n  const parentRef = useRef(null);\n  const [showModal, setShowModal] = useState(false);\n  const { stringSet } = useContext(LocalizationContext);\n\n  return (\n    <div\n      role=\"button\"\n      style={{ display: 'inline-block' }}\n      onKeyDown={(e) => { e.stopPropagation(); }}\n      tabIndex={0}\n      onClick={(e) => { e.stopPropagation(); }}\n    >\n      <ContextMenu\n        menuTrigger={(toggleDropdown) => (\n          <IconButton\n            ref={parentRef}\n            onClick={toggleDropdown}\n            height=\"32px\"\n            width=\"32px\"\n          >\n            <Icon\n              type={IconTypes.MORE}\n              fillColor={IconColors.PRIMARY}\n              width=\"24px\"\n              height=\"24px\"\n            />\n          </IconButton>\n        )}\n        menuItems={(closeDropdown) => (\n          <MenuItems\n            parentRef={parentRef}\n            parentContainRef={parentRef}\n            closeDropdown={closeDropdown}\n          >\n            <MenuItem\n              onClick={() => {\n                if (disabled) { return; }\n                setShowModal(true);\n                closeDropdown();\n              }}\n            >\n              {stringSet.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE}\n            </MenuItem>\n          </MenuItems>\n        )}\n      />\n      {\n        showModal && (\n          <LeaveChannelModal\n            onCloseModal={() => setShowModal(false)}\n            onLeaveChannel={onLeaveChannel}\n          />\n        )\n      }\n    </div>\n  );\n}\n\nChannelPreviewAction.propTypes = {\n  disabled: PropTypes.bool,\n  onLeaveChannel: PropTypes.func.isRequired,\n};\n\nChannelPreviewAction.defaultProps = {\n  disabled: false,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Placeholder from '../../../ui/PlaceHolder';\n\nexport default function ChannelsPlaceholder({\n  type,\n}) {\n  return (\n    <div className=\"sendbird-channel-list\">\n      <Placeholder type={type} />\n    </div>\n  );\n}\n\nChannelsPlaceholder.propTypes = {\n  type: PropTypes.string.isRequired,\n};\n","import * as channelActions from './dux/actionTypes';\nimport * as topics from '../../lib/pubSub/topics';\n\nconst createEventHandler = ({\n  sdk,\n  sdkChannelHandlerId,\n  channelListDispatcher,\n  logger,\n}) => {\n  const ChannelHandler = new sdk.ChannelHandler();\n\n  ChannelHandler.onChannelChanged = (channel) => {\n    logger.info('ChannelList: onChannelChanged', channel);\n    channelListDispatcher({\n      type: channelActions.ON_CHANNEL_CHANGED,\n      payload: channel,\n    });\n  };\n  ChannelHandler.onChannelDeleted = (channelUrl) => {\n    logger.info('ChannelList: onChannelDeleted', channelUrl);\n    channelListDispatcher({\n      type: channelActions.ON_CHANNEL_DELETED,\n      payload: channelUrl,\n    });\n  };\n  ChannelHandler.onUserJoined = (channel) => {\n    logger.info('ChannelList: onUserJoined', channel);\n    if (channel.lastMessage) {\n      channelListDispatcher({\n        type: channelActions.ON_USER_JOINED,\n        payload: channel,\n      });\n    }\n  };\n  ChannelHandler.onUserBanned = (channel, user) => {\n    const { currentUser } = sdk;\n    logger.info('Channel | useHandleChannelEvents: onUserBanned', channel);\n    if (user.userId === currentUser.userId) {\n      channelListDispatcher({\n        type: channelActions.ON_USER_LEFT,\n        payload: {\n          channel,\n          isMe: true,\n        },\n      });\n    } else {\n      channelListDispatcher({\n        type: channelActions.ON_USER_LEFT,\n        payload: {\n          channel,\n          isMe: false,\n        },\n      });\n    }\n  };\n  ChannelHandler.onUserLeft = (channel, leftUser) => {\n    const { currentUser } = sdk;\n    const isMe = (currentUser.userId === leftUser.userId);\n    logger.info('ChannelList: onUserLeft', channel);\n    channelListDispatcher({\n      type: channelActions.ON_USER_LEFT,\n      payload: {\n        channel,\n        isMe,\n      },\n    });\n  };\n\n  ChannelHandler.onReadStatus = (channel) => {\n    logger.info('ChannelList: onReadStatus', channel);\n    channelListDispatcher({\n      type: channelActions.ON_READ_RECEIPT_UPDATED,\n      payload: channel,\n    });\n  };\n\n  ChannelHandler.onDeliveryReceiptUpdated = (channel) => {\n    logger.info('ChannelList: onDeliveryReceiptUpdated', channel);\n    if (channel.lastMessage) {\n      channelListDispatcher({\n        type: channelActions.ON_DELIVERY_RECEIPT_UPDATED,\n        payload: channel,\n      });\n    }\n  };\n\n  ChannelHandler.onMessageUpdated = (channel, message) => {\n    if (channel.lastMessage.isEqual(message)) {\n      logger.info('ChannelList: onMessageUpdated', channel);\n      channelListDispatcher({\n        type: channelActions.ON_LAST_MESSAGE_UPDATED,\n        payload: channel,\n      });\n    }\n  };\n\n  ChannelHandler.onChannelHidden = (channel) => {\n    logger.info('ChannelList: onChannelHidden', channel);\n    channelListDispatcher({\n      type: channelActions.ON_CHANNEL_ARCHIVED,\n      payload: channel,\n    });\n  };\n\n  ChannelHandler.onChannelFrozen = (channel) => {\n    logger.info('ChannelList: onChannelFrozen', channel);\n    channelListDispatcher({\n      type: channelActions.ON_CHANNEL_FROZEN,\n      payload: channel,\n    });\n  };\n\n  ChannelHandler.onChannelUnfrozen = (channel) => {\n    logger.info('ChannelList: onChannelUnfrozen', channel);\n    channelListDispatcher({\n      type: channelActions.ON_CHANNEL_UNFROZEN,\n      payload: channel,\n    });\n  };\n\n  logger.info('ChannelList: Added channelHandler');\n  sdk.addChannelHandler(sdkChannelHandlerId, ChannelHandler);\n};\n\nconst createChannelListQuery = ({ sdk, userFilledChannelListQuery = {} }) => {\n  const channelListQuery = sdk.GroupChannel.createMyGroupChannelListQuery();\n  channelListQuery.includeEmpty = false;\n  channelListQuery.order = 'latest_last_message'; // 'chronological', 'latest_last_message', 'channel_name_alphabetical', and 'metadata_value_alphabetical'\n  channelListQuery.limit = 20; // The value of pagination limit could be set up to 100.\n\n  if (userFilledChannelListQuery) {\n    Object.keys(userFilledChannelListQuery).forEach((key) => {\n      channelListQuery[key] = userFilledChannelListQuery[key];\n    });\n  }\n\n  return channelListQuery;\n};\n\n/**\n * Setup event listener\n * create channel source query\n * addloading screen\n */\nfunction setupChannelList({\n  sdk,\n  sdkChannelHandlerId,\n  channelListDispatcher,\n  setChannelSource,\n  onChannelSelect,\n  userFilledChannelListQuery,\n  logger,\n  sortChannelList,\n}) {\n  if (sdk && sdk.ChannelHandler) {\n    createEventHandler({\n      sdk,\n      channelListDispatcher,\n      sdkChannelHandlerId,\n      logger,\n    });\n  } else {\n    logger.console.warning('ChannelList - createEventHandler: sdk or sdk.ChannelHandler does not exist', sdk);\n  }\n\n  logger.info('ChannelList - creating query', { userFilledChannelListQuery });\n  const channelListQuery = createChannelListQuery({ sdk, userFilledChannelListQuery });\n  logger.info('ChannelList - created query', channelListQuery);\n\n  setChannelSource(channelListQuery);\n\n  channelListDispatcher({\n    type: channelActions.INIT_CHANNELS_START,\n  });\n\n  if (userFilledChannelListQuery) {\n    logger.info('ChannelList - setting up channelListQuery', channelListQuery);\n    channelListDispatcher({\n      type: channelActions.CHANNEL_LIST_PARAMS_UPDATED,\n      payload: {\n        channelListQuery,\n        currentUserId: sdk && sdk.currentUser && sdk.currentUser.userId,\n      },\n    });\n  }\n\n  logger.info('ChannelList - fetching channels');\n  if (channelListQuery.hasNext) {\n    channelListQuery.next((response, error) => {\n      const swapParams = sdk.getErrorFirstCallback();\n      let channelList = response;\n      let err = error;\n      if (swapParams) {\n        channelList = error;\n        err = response;\n      }\n      logger.info('ChannelList - fetched channels', channelList);\n      if (err) {\n        logger.error('ChannelList - couldnt fetch channels', err);\n        channelListDispatcher({\n          type: channelActions.INIT_CHANNELS_FAILURE,\n        });\n        return;\n      }\n      // select first channel\n      logger.info('ChannelList - highlight channel', channelList[0]);\n      let sorted = channelList;\n      if (sortChannelList && typeof sortChannelList === 'function') {\n        sorted = sortChannelList(channelList);\n        logger.info('ChannelList - channel list sorted', sorted);\n      }\n      onChannelSelect(sorted[0]);\n      channelListDispatcher({\n        type: channelActions.INIT_CHANNELS_SUCCESS,\n        payload: sorted,\n      });\n      if (channelList && typeof channelList.forEach === 'function') {\n        logger.info('ChannelList - mark all channels as delivered');\n        channelList.forEach((c) => c.markAsDelivered());\n      }\n    });\n  } else {\n    logger.warning('ChannelList - there are no more channels');\n  }\n}\n\nexport const pubSubHandleRemover = (subscriber) => {\n  subscriber.forEach((s) => {\n    try {\n      s.remove();\n    } catch {\n      //\n    }\n  });\n};\n\nexport const pubSubHandler = (pubSub, channelListDispatcher) => {\n  const subScriber = new Map();\n  if (!pubSub) return subScriber;\n  subScriber.set(topics.CREATE_CHANNEL, pubSub.subscribe(topics.CREATE_CHANNEL, (msg) => {\n    const { channel } = msg;\n    channelListDispatcher({\n      type: 'CREATE_CHANNEL',\n      payload: channel,\n    });\n  }));\n\n  subScriber.set(topics.UPDATE_USER_MESSAGE, pubSub.subscribe(topics.UPDATE_USER_MESSAGE, (msg) => {\n    const { channel, message } = msg;\n    const updatedChannel = channel;\n    updatedChannel.lastMessage = message;\n    if (channel) {\n      channelListDispatcher({\n        type: channelActions.ON_LAST_MESSAGE_UPDATED,\n        payload: updatedChannel,\n      });\n    }\n  }));\n\n  subScriber.set(topics.LEAVE_CHANNEL, pubSub.subscribe(topics.LEAVE_CHANNEL, (msg) => {\n    const { channel } = msg;\n    channelListDispatcher({\n      type: channelActions.LEAVE_CHANNEL_SUCCESS,\n      payload: channel.url,\n    });\n  }));\n\n  subScriber.set(topics.SEND_MESSAGE_START, pubSub.subscribe(topics.SEND_MESSAGE_START, (msg) => {\n    const { channel } = msg;\n    channelListDispatcher({\n      type: channelActions.CHANNEL_REPLACED_TO_TOP,\n      payload: channel,\n    });\n  }));\n\n  return subScriber;\n};\n\nexport default setupChannelList;\n","import React, { useEffect, useState, useReducer } from 'react';\nimport PropTypes from 'prop-types';\n\nimport withSendbirdContext from '../../lib/SendbirdSdkContext';\nimport * as userActions from '../../lib/dux/user/actionTypes';\nimport { UserProfileProvider } from '../../lib/UserProfileContext';\n\nimport * as channelListActions from './dux/actionTypes';\nimport channelListInitialState from './dux/initialState';\nimport channelListReducers from './dux/reducers';\n\nimport ChannelPreview from '../../ui/ChannelPreview';\nimport ChannelHeader from '../../ui/ChannelHeader';\nimport EditUserProfile from '../../ui/EditUserProfile';\nimport PlaceholderTypes from '../../ui/PlaceHolder/type';\n\nimport AddChannel from './components/AddChannel';\nimport ChannelPreviewAction from './components/ChannelPreviewAction';\nimport PlaceHolder from './components/Placeholder';\n\nimport setupChannelList, {\n  pubSubHandler,\n  pubSubHandleRemover,\n} from './utils';\nimport { uuidv4 } from '../../utils/uuid';\n\nimport './index.scss';\n\nconst noop = () => { };\n\nfunction ChannelList(props) {\n  const {\n    stores: { sdkStore = {}, userStore = {} },\n    config: {\n      userId,\n      isOnline,\n      userListQuery,\n      logger,\n      pubSub,\n      theme,\n    },\n    dispatchers: {\n      userDispatcher,\n    },\n    queries = {},\n    renderChannelPreview,\n    renderHeader,\n    renderUserProfile,\n    disableUserProfile,\n    allowProfileEdit,\n    sortChannelList,\n    onProfileEditSuccess,\n    onThemeChange,\n    onBeforeCreateChannel,\n    onChannelSelect,\n  } = props;\n  const { config = {} } = props;\n  // enable if it is true atleast once(both are flase by default)\n  const enableEditProfile = allowProfileEdit || config.allowProfileEdit;\n  const userDefinedDisableUserProfile = disableUserProfile || config.disableUserProfile;\n  const userDefinedRenderProfile = renderUserProfile || config.renderUserProfile;\n  const { sdk = {} } = sdkStore;\n  const userFilledChannelListQuery = queries.channelListQuery;\n  const userFilledApplicationUserListQuery = queries.applicationUserListQuery;\n\n  const sdkError = sdkStore.error;\n  const sdkIntialized = sdkStore.initialized;\n\n  const [channelListStore, channelListDispatcher] = useReducer(\n    channelListReducers,\n    channelListInitialState,\n  );\n  const [user, setUser] = useState({});\n  const [channelSource, setChannelSource] = useState({});\n  const [showProfileEdit, setShowProfileEdit] = useState(false);\n  const [sdkChannelHandlerId, setSdkChannelHandlerId] = useState(null);\n\n  const { loading, currentChannel } = channelListStore;\n\n  useEffect(() => {\n    setUser(userStore.user);\n  }, [userStore.user]);\n\n  useEffect(() => {\n    const subscriber = pubSubHandler(pubSub, channelListDispatcher);\n    return () => {\n      pubSubHandleRemover(subscriber);\n    };\n  }, [sdkIntialized]);\n\n  useEffect(() => {\n    setSdkChannelHandlerId(uuidv4);\n    if (sdkIntialized) {\n      logger.info('ChannelList: Setup channelHandlers');\n      setupChannelList({\n        sdk,\n        sdkChannelHandlerId,\n        channelListDispatcher,\n        setChannelSource,\n        onChannelSelect,\n        userFilledChannelListQuery,\n        logger,\n        sortChannelList,\n      });\n    } else {\n      logger.info('ChannelList: Removing channelHandlers');\n      // remove previous channelHandlers\n      if (sdk && sdk.removeChannelHandler) {\n        sdk.removeChannelHandler(sdkChannelHandlerId);\n      }\n      // remove channelSource\n      setChannelSource({});\n      // cleanup\n      channelListDispatcher({\n        type: channelListActions.RESET_CHANNEL_LIST,\n      });\n    }\n    return () => {\n      logger.info('ChannelList: Removing channelHandlers');\n      if (sdk && sdk.removeChannelHandler) {\n        sdk.removeChannelHandler(sdkChannelHandlerId);\n      }\n    };\n  }, [sdkIntialized, userFilledChannelListQuery, sortChannelList]);\n\n  const { allChannels } = channelListStore;\n  const sortedChannels = (sortChannelList && typeof sortChannelList === 'function')\n    ? sortChannelList(allChannels)\n    : allChannels;\n\n  if (sortedChannels.length !== allChannels.length) {\n    const warning = `ChannelList: You have removed/added extra channels on sortChannelList\n      this could cause unexpected problems`;\n    // eslint-disable-next-line no-console\n    console.warn(warning, { before: allChannels, after: sortedChannels });\n    logger.warning(warning, { before: allChannels, after: sortedChannels });\n  }\n\n  useEffect(() => {\n    if (!sdk || !sdk.GroupChannel || !currentChannel) { return; }\n    sdk.GroupChannel.getChannel(currentChannel, (groupChannel) => {\n      if (groupChannel) {\n        onChannelSelect(groupChannel);\n      } else {\n        onChannelSelect(null);\n      }\n    });\n  }, [currentChannel]);\n\n  return (\n    <UserProfileProvider\n      className=\"sendbird-channel-list\"\n      disableUserProfile={userDefinedDisableUserProfile}\n      renderUserProfile={userDefinedRenderProfile}\n    >\n      <div className=\"sendbird-channel-list__header\">\n        <ChannelHeader\n          renderHeader={renderHeader}\n          user={user}\n          onEdit={() => {\n            if (enableEditProfile) {\n              setShowProfileEdit(true);\n            }\n          }}\n          allowProfileEdit={enableEditProfile}\n          iconButton={(\n            <AddChannel\n              disabled={!isOnline}\n              userListQuery={userListQuery}\n              sdk={sdk}\n              channelListDispatcher={channelListDispatcher}\n              userId={userId}\n              userFilledApplicationUserListQuery={userFilledApplicationUserListQuery}\n              onBeforeCreateChannel={onBeforeCreateChannel}\n            />\n          )}\n        />\n      </div>\n      {\n        showProfileEdit && (\n          <EditUserProfile\n            onThemeChange={onThemeChange}\n            user={user}\n            onCancel={() => { setShowProfileEdit(false); }}\n            onSubmit={(newName, newFile) => {\n              sdk.updateCurrentUserInfoWithProfileImage(newName, newFile, (updatedUser) => {\n                userDispatcher({ type: userActions.UPDATE_USER_INFO, payload: updatedUser });\n                if (onProfileEditSuccess && typeof onProfileEditSuccess === 'function') {\n                  onProfileEditSuccess(updatedUser);\n                }\n              });\n            }}\n          />\n        )\n      }\n      <div\n        className=\"sendbird-channel-list__body\"\n        onScroll={(e) => {\n          const fetchMore = e.target.clientHeight + e.target.scrollTop === e.target.scrollHeight;\n          if (fetchMore && channelSource.hasNext) {\n            logger.info('ChannelList: Fetching more channels');\n            channelListDispatcher({\n              type: channelListActions.FETCH_CHANNELS_START,\n            });\n            channelSource.next((response, error) => {\n              const swapParams = sdk.getErrorFirstCallback();\n              let channelList = response;\n              let err = error;\n              if (swapParams) {\n                channelList = error;\n                err = response;\n              }\n              if (err) {\n                logger.info('ChannelList: Fetching channels failed', err);\n                channelListDispatcher({\n                  type: channelListActions.FETCH_CHANNELS_FAILURE,\n                  payload: channelList,\n                });\n                return;\n              }\n              logger.info('ChannelList: Fetching channels successful', channelList);\n              channelListDispatcher({\n                type: channelListActions.FETCH_CHANNELS_SUCCESS,\n                payload: channelList,\n              });\n              if (channelList && typeof channelList.forEach === 'function') {\n                logger.info('ChannelList: Marking all channels as read');\n                channelList.forEach((c) => c.markAsDelivered());\n              }\n            });\n          }\n        }}\n      >\n        {\n          (sdkError) && (\n            <PlaceHolder type={PlaceholderTypes.WRONG} />\n          )\n        }\n        {/*\n          To do: Implement windowing\n          Implement windowing if you are dealing with large number of messages/channels\n          https://github.com/bvaughn/react-window -> recommendation\n          We hesitate to bring one more dependency to our library,\n          we are planning to implement it inside the library\n        */}\n        <div>\n          {\n            sortedChannels && sortedChannels.map((channel, idx) => {\n              const onLeaveChannel = (c, cb) => {\n                logger.info('ChannelList: Leaving channel', c);\n                c.leave()\n                  .then((res) => {\n                    logger.info('ChannelList: Leaving channel success', res);\n                    if (cb && typeof cb === 'function') {\n                      cb(res, null);\n                    }\n                    channelListDispatcher({\n                      type: channelListActions.LEAVE_CHANNEL_SUCCESS,\n                      payload: channel.url,\n                    });\n                  })\n                  .catch((err) => {\n                    logger.error('ChannelList: Leaving channel failed', err);\n                    if (cb && typeof cb === 'function') {\n                      cb(null, err);\n                    }\n                  });\n              };\n\n              const onClick = () => {\n                if (!isOnline) { return; }\n                logger.info('ChannelList: Clicked on channel:', channel);\n                channelListDispatcher({\n                  type: channelListActions.SET_CURRENT_CHANNEL,\n                  payload: channel.url,\n                });\n              };\n\n              return (\n                (renderChannelPreview)\n                  ? (\n                    // eslint-disable-next-line\n                    <div key={channel.url} onClick={onClick}>\n                      {renderChannelPreview({ channel, onLeaveChannel })}\n                    </div>\n                  )\n                  : (\n                    <ChannelPreview\n                      key={channel.url}\n                      tabIndex={idx}\n                      onClick={onClick}\n                      channel={channel}\n                      currentUser={user}\n                      theme={theme}\n                      isActive={channel.url === currentChannel}\n                      // todo - potential performance hit refactor\n                      ChannelAction={(\n                        <ChannelPreviewAction\n                          disabled={!isOnline}\n                          onLeaveChannel={() => onLeaveChannel(channel)}\n                        />\n                      )}\n                    />\n                  )\n              );\n            })\n          }\n        </div>\n        {\n          (!sdkIntialized || loading) && (\n            <PlaceHolder type={PlaceholderTypes.LOADING} />\n          )\n        }\n        {\n          //  placeholder\n          (!allChannels || allChannels.length === 0) && (\n            <PlaceHolder type={PlaceholderTypes.NO_CHANNELS} />\n          )\n        }\n      </div>\n    </UserProfileProvider>\n  );\n}\n\nChannelList.propTypes = {\n  stores: PropTypes.shape({\n    sdkStore: PropTypes.shape({\n      initialized: PropTypes.bool,\n    }),\n    userStore: PropTypes.shape({\n      user: PropTypes.shape({}),\n    }),\n  }).isRequired,\n  dispatchers: PropTypes.shape({\n    userDispatcher: PropTypes.func,\n  }).isRequired,\n  config: PropTypes.shape({\n    userId: PropTypes.string.isRequired,\n    userListQuery: PropTypes.func,\n    theme: PropTypes.string,\n    isOnline: PropTypes.bool,\n    logger: PropTypes.shape({\n      info: PropTypes.func,\n      error: PropTypes.func,\n      warning: PropTypes.func,\n    }),\n    pubSub: PropTypes.shape({\n      subscribe: PropTypes.func,\n      publish: PropTypes.func,\n    }),\n  }).isRequired,\n  queries: PropTypes.shape({\n    channelListQuery: PropTypes.shape({\n      channelNameContainsFilter: PropTypes.string,\n      channelUrlsFilter: PropTypes.arrayOf(PropTypes.string),\n      customTypesFilter: PropTypes.arrayOf(PropTypes.string),\n      customTypeStartsWithFilter: PropTypes.string,\n      hiddenChannelFilter: PropTypes.string,\n      includeEmpty: PropTypes.bool,\n      limit: PropTypes.number,\n      memberStateFilter: PropTypes.string,\n      metadataOrderKeyFilter: PropTypes.string,\n      nicknameContainsFilter: PropTypes.string,\n      order: PropTypes.string,\n      publicChannelFilter: PropTypes.string,\n      superChannelFilter: PropTypes.string,\n      unreadChannelFilter: PropTypes.string,\n      userIdsExactFilter: PropTypes.arrayOf(PropTypes.string),\n      userIdsIncludeFilter: PropTypes.arrayOf(PropTypes.string),\n      userIdsIncludeFilterQueryType: PropTypes.string,\n    }),\n    applicationUserListQuery: PropTypes.shape({\n      limit: PropTypes.number,\n      userIdsFilter: PropTypes.arrayOf(PropTypes.string),\n      metaDataKeyFilter: PropTypes.string,\n      metaDataValuesFilter: PropTypes.arrayOf(PropTypes.string),\n    }),\n  }),\n  onBeforeCreateChannel: PropTypes.func,\n  renderChannelPreview: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.func,\n  ]),\n  disableUserProfile: PropTypes.bool,\n  renderUserProfile: PropTypes.func,\n  allowProfileEdit: PropTypes.bool,\n  sortChannelList: PropTypes.func,\n  onThemeChange: PropTypes.func,\n  onProfileEditSuccess: PropTypes.func,\n  renderHeader: PropTypes.oneOfType([\n    PropTypes.element,\n    PropTypes.func,\n  ]),\n  onChannelSelect: PropTypes.func,\n};\n\nChannelList.defaultProps = {\n  onBeforeCreateChannel: null,\n  renderChannelPreview: null,\n  renderHeader: null,\n  disableUserProfile: false,\n  renderUserProfile: null,\n  allowProfileEdit: false,\n  onThemeChange: null,\n  sortChannelList: null,\n  onProfileEditSuccess: null,\n  queries: {},\n  onChannelSelect: noop,\n};\n\nexport default withSendbirdContext(ChannelList);\n"],"names":["RESET_CHANNEL_LIST","CREATE_CHANNEL","LEAVE_CHANNEL_SUCCESS","SET_CURRENT_CHANNEL","SHOW_CHANNEL_SETTINGS","HIDE_CHANNEL_SETTINGS","FETCH_CHANNELS_START","FETCH_CHANNELS_SUCCESS","FETCH_CHANNELS_FAILURE","INIT_CHANNELS_START","INIT_CHANNELS_SUCCESS","INIT_CHANNELS_FAILURE","ON_USER_JOINED","ON_CHANNEL_DELETED","ON_LAST_MESSAGE_UPDATED","ON_USER_LEFT","ON_CHANNEL_CHANGED","ON_CHANNEL_ARCHIVED","ON_CHANNEL_FROZEN","ON_CHANNEL_UNFROZEN","ON_READ_RECEIPT_UPDATED","ON_DELIVERY_RECEIPT_UPDATED","CHANNEL_REPLACED_TO_TOP","CHANNEL_LIST_PARAMS_UPDATED","initialized","loading","allChannels","currentChannel","showSettings","channelListQuery","currentUserId","reducer","state","action","type","actions","initialState","payload","length","url","currentChannels","map","c","filteredChannels","filter","find","channel","filterChannelListParams","getChannelsWithUpsertedChannel","ch","channelUrl","isMe","unreadMessageCount","lastMessage","currentUnreadCount","isFrozen","getChannelTitle","stringSet","LabelStringSet","name","members","NO_TITLE","NO_MEMBERS","userId","nickname","NO_NAME","join","getLastMessageCreatedAt","date","createdAt","isToday","format","isYesterday","getTotalMembers","memberCount","getPrettyLastMessage","message","MAXLEN","messageType","truncateString","getLastMessage","getChannelUnreadMessageCount","ChannelPreview","currentUser","isActive","ChannelAction","theme","onClick","tabIndex","isBroadcast","useContext","LocalizationContext","React","ChannelAvatar","Icon","IconTypes","BROADCAST","IconColors","SECONDARY","Label","LabelTypography","SUBTITLE_2","LabelColors","ONBACKGROUND_1","utils","CAPTION_2","ONBACKGROUND_2","FREEZE","PRIMARY","CAPTION_3","BODY_2","ONBACKGROUND_3","Badge","propTypes","PropTypes","shape","arrayOf","coverUrl","string","bool","element","isRequired","func","number","defaultProps","ChannelHeader","user","renderHeader","iconButton","onEdit","allowProfileEdit","Avatar","profileUrl","oneOfType","instanceOf","IconButton","EditUserProfile","_a","_b","onCancel","onSubmit","_c","changeTheme","noop","_d","onThemeChange","hiddenInputRef","useRef","inputRef","formRef","_e","useState","currentImg","setCurrentImg","_f","newFile","setNewFile","Modal","EDIT_PROFILE__TITLE","BUTTON__SAVE","ButtonType","current","value","reportValidity","e","preventDefault","InputLabel","EDIT_PROFILE__IMAGE_LABEL","display","URL","createObjectURL","target","files","TextButton","click","BUTTON_1","EDIT_PROFILE__IMAGE_UPLOAD","EDIT_PROFILE__NICKNAME_LABEL","Input","EDIT_PROFILE__NICKNAME_PLACEHOLDER","EDIT_PROFILE__USERID_LABEL","EDIT_PROFILE__THEME_LABEL","TOGGLE_ON","TOGGLE_OFF","mapStoreToProps","store","config","setCurrenttheme","ConnectedEditUserProfile","withSendbirdContext","AddChannel","sdk","disabled","channelListDispatcher","onBeforeCreateChannel","userFilledApplicationUserListQuery","userListQuery","showModal","setShowModal","step","setStep","setType","createApplicationUserListQuery","isBroadcastAvailable","isBroadcastChannelEnabled","isSupergroupAvailable","isSuperGroupChannelEnabled","CREATE","CHAT","SUBTITLE_1","SUPERGROUP","InviteMembers","getErrorFirstCallback","MODAL__CREATE_CHANNEL__TITLE","BUTTON__CREATE","createDefaultUserListQuery","selectedUsers","createChannel","then","ChannelPreviewAction","onLeaveChannel","parentRef","stopPropagation","ContextMenu","toggleDropdown","MORE","closeDropdown","MenuItems","MenuItem","CHANNEL_SETTING__LEAVE_CHANNEL__TITLE","LeaveChannelModal","ChannelsPlaceholder","Placeholder","createEventHandler","sdkChannelHandlerId","logger","ChannelHandler","onChannelChanged","info","channelActions","onChannelDeleted","onUserJoined","onUserBanned","onUserLeft","leftUser","onReadStatus","onDeliveryReceiptUpdated","onMessageUpdated","isEqual","onChannelHidden","onChannelFrozen","onChannelUnfrozen","addChannelHandler","createChannelListQuery","userFilledChannelListQuery","GroupChannel","createMyGroupChannelListQuery","includeEmpty","order","limit","Object","keys","forEach","key","setupChannelList","setChannelSource","onChannelSelect","sortChannelList","console","warning","hasNext","next","response","error","swapParams","channelList","err","sorted","markAsDelivered","pubSubHandleRemover","subscriber","s","remove","pubSubHandler","pubSub","subScriber","Map","set","topics","subscribe","msg","updatedChannel","ChannelList","props","stores","sdkStore","userStore","isOnline","userDispatcher","dispatchers","queries","renderChannelPreview","renderUserProfile","disableUserProfile","onProfileEditSuccess","enableEditProfile","userDefinedDisableUserProfile","userDefinedRenderProfile","applicationUserListQuery","sdkError","sdkIntialized","useReducer","channelListReducers","channelListInitialState","channelListStore","setUser","channelSource","showProfileEdit","setShowProfileEdit","setSdkChannelHandlerId","useEffect","uuidv4","removeChannelHandler","channelListActions","sortedChannels","warn","before","after","getChannel","groupChannel","UserProfileProvider","newName","updateCurrentUserInfoWithProfileImage","updatedUser","userActions","fetchMore","clientHeight","scrollTop","scrollHeight","PlaceHolder","PlaceholderTypes","WRONG","idx","cb","leave","res","catch","LOADING","NO_CHANNELS","publish","channelNameContainsFilter","channelUrlsFilter","customTypesFilter","customTypeStartsWithFilter","hiddenChannelFilter","memberStateFilter","metadataOrderKeyFilter","nicknameContainsFilter","publicChannelFilter","superChannelFilter","unreadChannelFilter","userIdsExactFilter","userIdsIncludeFilter","userIdsIncludeFilterQueryType","userIdsFilter","metaDataKeyFilter","metaDataValuesFilter"],"mappings":"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"}